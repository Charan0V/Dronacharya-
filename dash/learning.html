<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mahabharata Dashboard</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@600&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'EB Garamond', serif;
      background: #fdf6e3;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Upper Half */
    .upper-half {
      height: 50vh;
      background: linear-gradient(to right, #f5deb3, #ffe4b5);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.25);
      border-bottom: 3px solid #deb887;
    }
    .title {
      font-family: 'Great Vibes', cursive;
      font-size: 3.5rem;
      color: #5e0b15;
      text-shadow: 2px 2px 4px #ffd700;
      letter-spacing: 2px;
    }

    /* Bottom Half */
    .bottom-half {
      height: 50vh;
      display: grid;
      grid-template-columns: 2.2fr 9.8fr;
    }

    /* Sidebar */
    .sidebar {
      background: linear-gradient(180deg, #5e0b15, #8b4513);
      color: #fdf6e3;
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      border-right: 3px solid #deb887;
    }
    .sidebar h2 {
      font-size: 1.5rem;
      margin-bottom: 1.8rem;
      font-weight: bold;
      text-align: center;
      border-bottom: 2px solid #ffd700;
      padding-bottom: 0.5rem;
    }
    .sidebar a {
      display: block;
      font-size: 1.2rem;
      margin: 0.75rem 0;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    .sidebar a:hover {
      color: #ffd700;
      background: rgba(255,215,0,0.1);
    }

    /* Notes Section */
    #notesSection {
      background: #fff8dc;
      border: 2px solid #deb887;
      border-radius: 12px;
      font-size: 1.15rem;
      padding: 1.2rem;
      overflow-y: auto;
      height: calc(100% - 90px);
      box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    }

    /* Input Section */
    .input-area {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-top: 1rem;
    }
    .input-area input {
      flex: 1;
      border: 2px solid #a0522d;
      background: #fffaf0;
      border-radius: 8px;
      padding: 0.6rem 1rem;
      font-size: 1rem;
    }
    .btn-primary {
      background-color: #a0522d;
      border: none;
      font-size: 1.1rem;
      padding: 0.6rem 1rem;
      border-radius: 8px;
    }
    .btn-primary:hover {
      background-color: #5e0b15;
    }
    .btn-outline-secondary {
      border: 2px solid #a0522d;
      color: #a0522d;
      font-size: 1.1rem;
      padding: 0.6rem 1rem;
      border-radius: 8px;
    }
    .btn-outline-secondary:hover {
      background-color: #a0522d;
      color: #fff;
    }
  </style>
</head>
<body>

  <!-- Upper Half -->
  <div class="upper-half">
    <h1 class="title" id="mainTitle">Placeholder for Avatar and video/images</h1>
  </div>

  <!-- Bottom Half -->
  <div class="bottom-half">
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>Menu</h2>
      <a href="home.php"><i class="fa fa-home mr-2"></i> Home</a>
      <a href="course_manager.php"><i class="fa fa-graduation-cap mr-2"></i> Course Manager</a>
      <a href="dashboard.php"><i class="fa fa-map mr-2"></i> General Roadmap</a>
      <a href="profile.html"><i class="fa fa-user mr-2"></i> Profile</a>
      <a href="language.html"><i class="fa fa-language mr-2"></i> Language Switch</a>
      <a href="#" onclick="logout()" class="text-red-400"><i class="fa fa-sign-out-alt mr-2"></i> Logout</a>
    </div>

    <!-- Notes Section -->
    <div class="p-6 flex flex-col">
      <h3 class="text-3xl font-bold mb-3 text-[#5e0b15]">Key Notes & Points</h3>
      <div id="notesSection">
        <p class="text-gray-700">Your notes will appear here...</p>
      </div>
      <!-- Input -->
      <div class="input-area">
        <input type="text" placeholder="Write a note...">
        <button class="btn btn-primary"><i class="fa fa-paper-plane"></i></button>
        <button class="btn btn-outline-secondary"><i class="fa fa-microphone"></i></button>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // Function to get URL parameters
    function getUrlParameter(name) {
      name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
      var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
      var results = regex.exec(location.search);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // Update title when page loads
    document.addEventListener('DOMContentLoaded', function() {
      var title = getUrlParameter('title');
      var mainTitle = document.getElementById('mainTitle');
      
      if (title && title.trim() !== '') {
        mainTitle.textContent = title;
        mainTitle.style.fontSize = '3rem'; // Slightly smaller for longer titles
        mainTitle.style.lineHeight = '1.2';
      }
    });

    // Logout function
    async function logout() {
      if (confirm('Are you sure you want to logout?')) {
        try {
          const formData = new FormData();
          formData.append('action', 'logout');
          
          const response = await fetch('../auth/auth.php', {
            method: 'POST',
            body: formData
          });
          
          const result = await response.json();
          
          if (result.success) {
            window.location.href = 'home.php';
          } else {
            alert('Error logging out. Please try again.');
          }
        } catch (error) {
          alert('An error occurred. Please try again.');
        }
      }
    }
  </script>
</body>
</html>
